(this["webpackJsonpshobiz-frontend"]=this["webpackJsonpshobiz-frontend"]||[]).push([[0],{49:function(e,t,a){e.exports=a(82)},54:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(44),r=a.n(l),i=(a(54),a(6)),c=a(7),u=a(9),s=a(8),m=a(21),p=(a(10),a(19)),v=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={username:"",password:""},e.handleSubmit=function(t){t.preventDefault(),e.props.handleSubmit(e.state)},e.handleChange=function(t){var a=t.target,n=a.name,o=a.value;e.setState(Object(m.a)({},n,o))},e}return Object(c.a)(a,[{key:"render",value:function(){this.props.formName;var e=this.state;e.username,e.password}}]),a}(n.Component),E=function(){return o.a.createElement("div",null,o.a.createElement("h1",{id:"header"},"Welcome to Shobiz! The go to site for finding movie reviews about the most popular movies. "))},h=a(11),d=a(24),f=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={display:!1},e.handleLike=function(t){e.props.increaseLikes(e.props.review)},e.handleDelete=function(t){e.props.deleteReview(e.props.review.id)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(d.a,null,o.a.createElement(h.a,null,o.a.createElement(h.a.Body,null,o.a.createElement(h.a.Title,null,this.props.review.user.username),o.a.createElement(h.a.Text,null,this.props.review.movie.title),o.a.createElement(h.a.Text,null,this.props.review.content),o.a.createElement(h.a.Text,null,o.a.createElement(p.a,{onClick:function(t){return e.handleLike(t)}},"Like","\u2665"),this.props.review.likes),o.a.createElement(h.a.Text,null,o.a.createElement(p.a,{onClick:this.handleDelete,variant:"danger"},"Delete Review")))))}}]),a}(n.Component),g=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h2",null,this.props.user.username,"'s Profile"),this.props.user.reviews.map((function(t){return o.a.createElement(f,{key:t.id,review:t,increaseLikes:e.props.increaseLikes,deleteReview:e.props.deleteReview})})))}}]),a}(n.Component),k=a(27),b=a(23),y=a(45),w=a.n(y),j=a(31),O=a.n(j),C=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search"},o.a.createElement("input",{onChange:function(t){return e.props.handleChange(t)},className:"searchTerm",type:"text",name:"search",value:this.props.searchTerm}))}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={content:"",user:{id:0,username:""},movie:{id:0,title:""},likes:0},e.handleSubmit=function(t){t.preventDefault(),e.props.addReview({user_id:e.props.userId,movie_id:e.props.movieId,content:t.target.content.value,likes:t.target.likes.value}),e.setState({content:"",likes:0})},e.handleChange=function(t){e.setState(Object(m.a)({},t.target.name,t.target.value))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state;e.content,e.likes}}]),a}(o.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={showImg:!1,display:!1},e.handleClick=function(t){var a=e.state.showImg;e.setState({showImg:!a})},e.handleDisplay=function(){var t=!e.state.display;e.setState({display:t})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(d.a,null,o.a.createElement(h.a,null,o.a.createElement(h.a.Img,{variant:"top",onClick:function(t){return e.handleClick(t)},src:this.state.showImg?this.props.movie.image_1:this.props.movie.image_2,alt:this.props.movie.title}),o.a.createElement(h.a.Body,null,o.a.createElement(h.a.Title,null,this.props.movie.title," - ",this.props.movie.language),o.a.createElement(h.a.Text,null,this.props.movie.overview),o.a.createElement(h.a.Text,null,this.props.movie.release_date),o.a.createElement(h.a.Title,null,"Reviews"),this.props.movie.reviews.map((function(t){return o.a.createElement(f,{key:t.id,review:t,increaseLikes:e.props.increaseLikes,deleteReview:e.props.deleteReview})})),this.state.display?o.a.createElement(S,{movieId:this.props.movie.id,addReview:this.props.addReview}):null,o.a.createElement(p.a,{onClick:this.handleDisplay},"Add a Review")))))}}]),a}(n.Component),L=function(e){return o.a.createElement("ul",null,e.movies.map((function(t){return o.a.createElement(R,{increaseLikes:e.increaseLikes,deleteReview:e.deleteReview,addReview:e.addReview,key:t.id,movie:t})})))},P=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("nav",null,o.a.createElement("select",{name:"language",onChange:function(t){return e.props.handleSelection(t)},id:"map"},o.a.createElement("option",{value:"All"},"All"),o.a.createElement("option",{value:"en"},"en"),o.a.createElement("option",{value:"he"},"he"),o.a.createElement("option",{value:"hi"},"hi"),o.a.createElement("option",{value:"pa"},"pa"),o.a.createElement("option",{value:"bn"},"bn"),o.a.createElement("option",{value:"zh"},"zh"),o.a.createElement("option",{value:"ko"},"ko"),o.a.createElement("option",{value:"es"},"es"),o.a.createElement("option",{value:"xx"},"xx"),o.a.createElement("option",{value:"aa"},"aa"),o.a.createElement("option",{value:"af"},"af"),o.a.createElement("option",{value:"ak"},"ak"),o.a.createElement("option",{value:"an"},"an"),o.a.createElement("option",{value:"as"},"as"),o.a.createElement("option",{value:"av"},"av"),o.a.createElement("option",{value:"ae"},"ae"),o.a.createElement("option",{value:"ay"},"ay"),o.a.createElement("option",{value:"az"},"az"),o.a.createElement("option",{value:"ba"},"ba"),o.a.createElement("option",{value:"bm"},"bm"),o.a.createElement("option",{value:"bi"},"bi"),o.a.createElement("option",{value:"bo"},"bo"),o.a.createElement("option",{value:"br"},"br"),o.a.createElement("option",{value:"ca"},"ca"),o.a.createElement("option",{value:"cs"},"cs"),o.a.createElement("option",{value:"ce"},"ce"),o.a.createElement("option",{value:"cu"},"cu"),o.a.createElement("option",{value:"cv"},"cv"),o.a.createElement("option",{value:"kw"},"kw"),o.a.createElement("option",{value:"co"},"co"),o.a.createElement("option",{value:"cr"},"cr"),o.a.createElement("option",{value:"cy"},"cy"),o.a.createElement("option",{value:"da"},"da"),o.a.createElement("option",{value:"de"},"de"),o.a.createElement("option",{value:"dv"},"dv"),o.a.createElement("option",{value:"dz"},"dz"),o.a.createElement("option",{value:"eo"},"eo"),o.a.createElement("option",{value:"eu"},"eu"),o.a.createElement("option",{value:"fo"},"fo"),o.a.createElement("option",{value:"fj"},"fj"),o.a.createElement("option",{value:"fi"},"fi"),o.a.createElement("option",{value:"fr"},"fr"),o.a.createElement("option",{value:"fy"},"fy"),o.a.createElement("option",{value:"ff"},"ff"),o.a.createElement("option",{value:"gd"},"gd"),o.a.createElement("option",{value:"ga"},"ga"),o.a.createElement("option",{value:"gl"},"gl"),o.a.createElement("option",{value:"gv"},"gv"),o.a.createElement("option",{value:"gn"},"gn"),o.a.createElement("option",{value:"gu"},"gu"),o.a.createElement("option",{value:"ht"},"ht"),o.a.createElement("option",{value:"ha"},"hs"),o.a.createElement("option",{value:"sh"},"sh"),o.a.createElement("option",{value:"hz"},"hz"),o.a.createElement("option",{value:"ho"},"ho"),o.a.createElement("option",{value:"hr"},"hr"),o.a.createElement("option",{value:"hu"},"hu"),o.a.createElement("option",{value:"ig"},"ig"),o.a.createElement("option",{value:"io"},"io"),o.a.createElement("option",{value:"ii"},"ii"),o.a.createElement("option",{value:"iu"},"iu"),o.a.createElement("option",{value:"ie"},"ie"),o.a.createElement("option",{value:"ia"},"ia"),o.a.createElement("option",{value:"id"},"id"),o.a.createElement("option",{value:"ik"},"ik"),o.a.createElement("option",{value:"is"},"is"),o.a.createElement("option",{value:"it"},"it"),o.a.createElement("option",{value:"jv"},"jv"),o.a.createElement("option",{value:"ja"},"ja"),o.a.createElement("option",{value:"kl"},"kl"),o.a.createElement("option",{value:"kn"},"kn"),o.a.createElement("option",{value:"ks"},"ks"),o.a.createElement("option",{value:"kr"},"kr"),o.a.createElement("option",{value:"kk"},"kk"),o.a.createElement("option",{value:"km"},"km"),o.a.createElement("option",{value:"ki"},"ki"),o.a.createElement("option",{value:"rw"},"rw"),o.a.createElement("option",{value:"ky"},"ky"),o.a.createElement("option",{value:"kv"},"kv"),o.a.createElement("option",{value:"kg"},"kg"),o.a.createElement("option",{value:"kj"},"kj"),o.a.createElement("option",{value:"ku"},"ku"),o.a.createElement("option",{value:"lo"},"lo"),o.a.createElement("option",{value:"la"},"la"),o.a.createElement("option",{value:"lv"},"lv"),o.a.createElement("option",{value:"li"},"li"),o.a.createElement("option",{value:"ln"},"ln"),o.a.createElement("option",{value:"lt"},"lt"),o.a.createElement("option",{value:"lb"},"lb"),o.a.createElement("option",{value:"lu"},"lu"),o.a.createElement("option",{value:"lg"},"lg"),o.a.createElement("option",{value:"mh"},"mh"),o.a.createElement("option",{value:"ml"},"ml"),o.a.createElement("option",{value:"mr"},"mr"),o.a.createElement("option",{value:"mg"},"mg"),o.a.createElement("option",{value:"mo"},"mo"),o.a.createElement("option",{value:"mn"},"mn"),o.a.createElement("option",{value:"mi"},"mi"),o.a.createElement("option",{value:"ms"},"ms"),o.a.createElement("option",{value:"my"},"my"),o.a.createElement("option",{value:"na"},"na"),o.a.createElement("option",{value:"nv"},"nv"),o.a.createElement("option",{value:"nr"},"nr"),o.a.createElement("option",{value:"ng"},"ng"),o.a.createElement("option",{value:"ne"},"ne"),o.a.createElement("option",{value:"nl"},"nl"),o.a.createElement("option",{value:"nn"},"nn"),o.a.createElement("option",{value:"nb"},"nb"),o.a.createElement("option",{value:"no"},"no"),o.a.createElement("option",{value:"ny"},"ny"),o.a.createElement("option",{value:"oc"},"oc"),o.a.createElement("option",{value:"oj"},"oj"),o.a.createElement("option",{value:"or"},"or"),o.a.createElement("option",{value:"om"},"om"),o.a.createElement("option",{value:"os"},"os"),o.a.createElement("option",{value:"pi"},"pi"),o.a.createElement("option",{value:"pl"},"pl"),o.a.createElement("option",{value:"pt"},"pt"),o.a.createElement("option",{value:"qu"},"qu"),o.a.createElement("option",{value:"rm"},"rm"),o.a.createElement("option",{value:"ro"},"ro"),o.a.createElement("option",{value:"rn"},"rn"),o.a.createElement("option",{value:"ru"},"ru"),o.a.createElement("option",{value:"sg"},"sg"),o.a.createElement("option",{value:"sa"},"sa"),o.a.createElement("option",{value:"si"},"si"),o.a.createElement("option",{value:"sk"},"sk"),o.a.createElement("option",{value:"sl"},"sl"),o.a.createElement("option",{value:"se"},"se"),o.a.createElement("option",{value:"sm"},"sm"),o.a.createElement("option",{value:"sn"},"sn"),o.a.createElement("option",{value:"sd"},"sd"),o.a.createElement("option",{value:"so"},"so"),o.a.createElement("option",{value:"st"},"st"),o.a.createElement("option",{value:"sq"},"sq"),o.a.createElement("option",{value:"sc"},"sc"),o.a.createElement("option",{value:"sr"},"sr"),o.a.createElement("option",{value:"ss"},"ss"),o.a.createElement("option",{value:"su"},"su"),o.a.createElement("option",{value:"sw"},"sw"),o.a.createElement("option",{value:"sv"},"sv"),o.a.createElement("option",{value:"ty"},"ty"),o.a.createElement("option",{value:"ta"},"ta"),o.a.createElement("option",{value:"tt"},"tt"),o.a.createElement("option",{value:"te"},"te"),o.a.createElement("option",{value:"tg"},"tg"),o.a.createElement("option",{value:"tl"},"tl"),o.a.createElement("option",{value:"th"},"th"),o.a.createElement("option",{value:"ti"},"ti"),o.a.createElement("option",{value:"to"},"to"),o.a.createElement("option",{value:"tn"},"tn"),o.a.createElement("option",{value:"ts"},"ts"),o.a.createElement("option",{value:"tk"},"tk"),o.a.createElement("option",{value:"tr"},"tr"),o.a.createElement("option",{value:"tw"},"tw"),o.a.createElement("option",{value:"ug"},"ug"),o.a.createElement("option",{value:"uk"},"uk"),o.a.createElement("option",{value:"ur"},"ur"),o.a.createElement("option",{value:"uz"},"uz"),o.a.createElement("option",{value:"ve"},"ve"),o.a.createElement("option",{value:"vi"},"vi"),o.a.createElement("option",{value:"vo"},"vo"),o.a.createElement("option",{value:"wa"},"wa"),o.a.createElement("option",{value:"wo"},"wo"),o.a.createElement("option",{value:"xh"},"xh"),o.a.createElement("option",{value:"yi"},"yi"),o.a.createElement("option",{value:"za"},"za"),o.a.createElement("option",{value:"zu"},"zu"),o.a.createElement("option",{value:"ab"},"ab"),o.a.createElement("option",{value:"ps"},"ps"),o.a.createElement("option",{value:"am"},"am"),o.a.createElement("option",{value:"bg"},"bg"),o.a.createElement("option",{value:"cn"},"cn"),o.a.createElement("option",{value:"mk"},"mk"),o.a.createElement("option",{value:"el"},"el"),o.a.createElement("option",{value:"fa"},"fa"),o.a.createElement("option",{value:"hy"},"hy"),o.a.createElement("option",{value:"ee"},"ee"),o.a.createElement("option",{value:"ka"},"ka"),o.a.createElement("option",{value:"bs"},"bs"),o.a.createElement("option",{value:"ch"},"ch"),o.a.createElement("option",{value:"be"},"be"),o.a.createElement("option",{value:"yo"},"yo")))}}]),a}(n.Component),T="http://localhost:4000/reviews",x=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleDisplay=function(){var e=!n.state.display;n.setState({display:e})},n.addReview=function(e){e.user_id=n.props.userId,fetch(T,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(t){var a=Object(k.a)(n.state.movies);a.find((function(t){return t.id===e.movie_id})).reviews.push(t),n.setState({movies:a})}))},n.increaseLikes=function(e){fetch("".concat(T,"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({likes:e.likes+1})}).then((function(e){return e.json()})).then((function(t){var a=Object(k.a)(n.state.movies);a.find((function(t){return t.id===e.movie.id})).reviews.find((function(e){return e.id===t.id})).likes=t.likes,n.setState({movies:a})}))},n.deleteReview=function(e){fetch("".concat(T,"/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then(n.removeDeletedReview)},n.removeDeletedReview=function(e){var t=e.id,a=e.movie,o=Object(k.a)(n.state.movies),l=o.find((function(e){return e.id===a.id})),r=l.reviews.findIndex((function(e){return e.id===t}));l.reviews.splice(r,1),n.setState({movies:o})},n.recievedData=function(){w.a.get("http://localhost:4000/movies").then((function(e){var t=e.data;n.setState({pageCount:Math.ceil(t.length/n.state.perPage),movies:t})}))},n.languageFilter=function(){var e=n.state,t=e.movies,a=e.language;return"All"===a?t:t.filter((function(e){return e.language===a}))},n.filteredMovies=function(){var e=n.state.searchTerm;return n.languageFilter().filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}))},n.pageCount=function(){var e=Math.ceil(n.filteredMovies().length/n.state.perPage);return e||void 0},n.slicedMovies=function(){return n.filteredMovies().slice(n.state.offset,n.state.offset+n.state.perPage)},n.handlePageClick=function(e){var t=e.selected,a=t*n.state.perPage;n.setState({currentPage:t,offset:a},(function(){n.recievedData()}))},n.handleSearch=function(e){n.setState({searchTerm:e.target.value})},n.handleSelection=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(m.a)({},a,o))},n.state={offset:0,movies:[],perPage:20,currentPage:0,searchTerm:"",language:"All",display:!1,reviews:[]},n.handlePageClick=n.handlePageClick.bind(Object(b.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.recievedData()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Movies Page"),o.a.createElement(O.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:this.pageCount(),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),o.a.createElement(C,{searchTerm:this.state.searchTerm,handleChange:this.handleSearch}),o.a.createElement(P,{handleSelection:this.handleSelection}),o.a.createElement(L,{addReview:this.addReview,increaseLikes:this.increaseLikes,deleteReview:this.deleteReview,movies:this.slicedMovies()}),o.a.createElement(O.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:this.pageCount(),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}))}}]),a}(n.Component),D=a(5),z=(a(78),a(47)),N=a(48),A=a(18),I=(a(20),function(){}),M=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={user:null},e.handleLoginSubmit=function(t){fetch("http://localhost:4000/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then(e.handleResponse)},e.handleRegisterSubmit=function(t){fetch("http://localhost:4000/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then(e.handleResponse)},e.handleResponse=function(t){t.user&&(localStorage.setItem("token",t.token),e.setState(t,(function(){e.props.history.push("/profile")})))},e.renderForm=function(t){return"/login"===t.location.pathname?o.a.createElement(v,{formName:"Login Form",handleSubmit:e.handleLoginSubmit}):"/register"===t.location.pathname?o.a.createElement(v,{formName:"Register Form",handleSubmit:e.handleRegisterSubmit}):void 0},e.renderProfile=function(t){if(e.state.token)return o.a.createElement(g,{user:e.state.user,token:e.state.token});e.props.history.push("/login")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&fetch("http://localhost:4000/users/stay_logged_in",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then(this.handleResponse)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(z.a,null,o.a.createElement(N.a,null,o.a.createElement("h1",{className:"header"},"Welcome to Shobiz"),o.a.createElement(I,null),o.a.createElement(D.c,null,o.a.createElement(D.a,{path:"/login",render:this.renderForm}),o.a.createElement(D.a,{path:"/register",render:this.renderForm}),o.a.createElement(D.a,{path:"/profile",render:this.renderProfile}),o.a.createElement(D.a,{path:"/movies",render:function(){return o.a.createElement(x,{user:e.state.user,userId:e.state.user.id})}}),o.a.createElement(D.a,{path:"/",exact:!0,component:E}),o.a.createElement(D.a,{render:function(){return o.a.createElement("p",null,"Page not Found")}})))))}}]),a}(n.Component),_=Object(D.f)(M);r.a.render(o.a.createElement(A.a,null,o.a.createElement(_,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.eb8d717b.chunk.js.map